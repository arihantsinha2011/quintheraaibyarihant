<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quinthera AI Chat</title>
<style>
/* Reset & basics */
* { box-sizing: border-box; }
body, html { margin:0; padding:0; height:100%; font-family:'Segoe UI', sans-serif; background: linear-gradient(135deg, #ff4e50, #1f8a70); color:white; display:flex; flex-direction:column; overflow:hidden; }

/* Top header */
#logo-header { display:flex; align-items:center; padding:1rem 2rem; background: rgba(0,0,0,0.3); box-shadow:0 2px 10px rgba(0,0,0,0.3); z-index:1000; }
#logo-header img { height:48px; width:48px; margin-right:1rem; border-radius:50%; border:2px solid white; }
#logo-header h1 { margin:0; font-size:1.8rem; font-weight:700; }

/* Container */
#container { flex:1; display:flex; overflow:hidden; position:relative; }

/* Sidebar */
#sidebar { background: linear-gradient(180deg, #ff5f7e, #0093e9); color:white; transition:width 0.3s ease; overflow:hidden; display:flex; flex-direction:column; box-shadow:2px 0 12px rgba(0,0,0,0.3); z-index:10; }
.sidebar-expanded { display:flex; flex-direction:column; height:100%; padding:1rem; width:280px; }
#sidebar.closed .sidebar-expanded { display:none; }
.sidebar-narrow { display:flex; flex-direction:column; align-items:center; width:64px; padding:1rem 0; height:100%; gap:1.5rem; background: linear-gradient(180deg, #ff5f7e, #0093e9); box-shadow:2px 0 12px rgba(0,0,0,0.3); position:relative; }
#sidebar.closed .sidebar-narrow { display:flex; }
#sidebar:not(.closed) .sidebar-narrow { display:none; }
#sidebar header { font-weight:700; font-size:1.4rem; text-align:center; border-bottom:1px solid rgba(255,255,255,0.2); padding-bottom:0.75rem; }
#version-selector-container { margin:0.5rem 0 1rem 0; display:flex; flex-direction:column; }
#version-select { padding:0.4rem 0.6rem; border-radius:6px; border:none; font-size:1rem; cursor:pointer; }

/* Search chats */
#search-chat { width:100%; padding:0.6rem 1rem; border-radius:30px; border:none; font-size:1rem; outline:none; background: rgba(255 255 255 / 0.15); color:white; margin-bottom:1rem; }

/* New Chat Button */
#new-chat-btn { width:100%; padding:0.75rem 1.5rem; border:none; border-radius:30px; background: rgba(255 255 255 / 0.3); color:white; font-weight:600; cursor:pointer; margin-bottom:1rem; }
#new-chat-btn:hover { background: rgba(255 255 255 / 0.5); }

/* Chat list */
#chat-list { flex:1; overflow-y:auto; border-radius:12px; background: rgba(255 255 255 / 0.15); padding:0.2rem 0; }
.chat-item { position:relative; padding:0.9rem 1rem; border-bottom:1px solid rgba(255 255 255 / 0.3); cursor:pointer; display:flex; justify-content:space-between; align-items:center; font-weight:600; }
.chat-item:hover { background: rgba(255 255 255 / 0.4); font-weight:700; }

/* Chat menu */
.chat-item .chat-menu-btn { visibility:hidden; background:transparent; border:none; color:inherit; font-size:20px; cursor:pointer; margin-left:0.5rem; }
.chat-item:hover .chat-menu-btn { visibility:visible; }
.chat-item .chat-menu { position:absolute; top:28px; right:8px; background: rgba(0,0,0,0.85); border-radius:8px; display:none; flex-direction:column; min-width:120px; }
.chat-item .chat-menu button { background:none; border:none; color:white; padding:0.5rem 1rem; text-align:left; cursor:pointer; font-size:0.9rem; font-weight:600; }
.chat-item .chat-menu button:hover { background:#ff5f7e; }
.chat-item.menu-open .chat-menu { display:flex; }

/* Main chat */
#main-chat { flex:1; display:flex; flex-direction:column; background: linear-gradient(135deg, #ff4e50, #1f8a70); transition: margin-left 0.3s ease; overflow:hidden; }
#chat-header { padding:1.5rem 2rem; font-weight:700; font-size:1.6rem; border-bottom:1px solid rgba(255,255,255,0.15); }
#chat-container { flex:1; padding:2rem; overflow-y:auto; display:flex; flex-direction:column; gap:1rem; }
.message { max-width:65%; padding:1rem 1.3rem; border-radius:25px; line-height:1.4; word-wrap:break-word; font-size:1.05rem; box-shadow:0 4px 8px rgba(0,0,0,0.2); }
.user-message { background:#ff5f7e; align-self:flex-end; border-bottom-right-radius:6px; color:white; }
.bot-message { background: rgba(255 255 255 / 0.15); align-self:flex-start; border-bottom-left-radius:6px; color:#eee; }

/* Input area */
#input-area { padding:1.5rem 2rem; background: rgba(0,0,0,0.2); display:flex; align-items:center; gap:1rem; }
#user-input { flex:1; padding:0.9rem 1.3rem; border-radius:30px; border:none; font-size:1.1rem; outline:none; background: rgba(255 255 255 / 0.15); color:white; }
#user-input::placeholder { color: rgba(255 255 255 / 0.7); }
#send-btn { background:#0093e9; color:white; font-weight:700; border-radius:30px; padding:0.7rem 1.5rem; cursor:pointer; }
#send-btn:hover { background:#007acc; }
</style>
</head>
<body>

<!-- HEADER -->
<div id="logo-header">
<img src="Logo.png" alt="Quinthera Logo">
<h1>QUINTHERA AI</h1>
</div>

<!-- CONTAINER -->
<div id="container">

<!-- SIDEBAR -->
<nav id="sidebar" class="closed">
<div class="sidebar-expanded">
<header>Chats</header>
<input type="text" id="search-chat" placeholder="Search chats...">
<button id="new-chat-btn">+ New Chat</button>
<div id="chat-list"></div>
<div id="sidebar-footer">
<!-- Optional buttons -->
</div>
</div>
<div class="sidebar-narrow">
<!-- Narrow sidebar content -->
</div>
</nav>

<!-- MAIN CHAT -->
<main id="main-chat">
<div id="chat-header">Welcome! Start a new chat or select one.</div>
<div id="chat-container"></div>
<div id="input-area">
<input type="text" id="user-input" placeholder="Type your message...">
<button id="send-btn">Send</button>
</div>
</main>
</div>

<script>
// --------- CHAT DATA ---------
let chats = [
  { id: 1, title: "First Chat" },
  { id: 2, title: "Work Discussion" },
  { id: 3, title: "Casual Talk" },
];
let menuOpenChatId = null;

// --------- RENDER CHATS ---------
function renderChats(filter="") {
  const chatList = document.getElementById('chat-list');
  chatList.innerHTML = "";
  const filtered = chats.filter(c=>c.title.toLowerCase().includes(filter.toLowerCase()));
  filtered.forEach(chat=>{
    const item = document.createElement('div');
    item.className="chat-item";
    item.dataset.id=chat.id;
    item.innerHTML=`<span>${chat.title}</span><button class="chat-menu-btn">â‹®</button>`;
    chatList.appendChild(item);
  });
}

renderChats();

// --------- CHAT FUNCTIONS ---------
function addMessage(text,type){
  const chatContainer=document.getElementById('chat-container');
  const msg=document.createElement('div');
  msg.classList.add('message',type==='user'?'user-message':'bot-message');
  msg.textContent=text;
  chatContainer.appendChild(msg);
  chatContainer.scrollTop = chatContainer.scrollHeight;
}

// --------- OPENROUTER API ---------
async function getAIResponse(userMessage) {
  try {
    const res = await fetch('https://openrouter.ai/api/v1/chat/completions', {
      method: 'POST',
      headers: {
        'Authorization': 'Bearer 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',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        model: 'deepseek/deepseek-r1-0528:free',
        messages: [{ role: 'user', content: userMessage }]
      })
    });

    if (!res.ok) {
      const txt = await res.text();
      console.error('API Error:', txt);
      return 'Error: Unable to get response from AI.';
    }

    const data = await res.json();
    return data.choices[0].message.content || 'No response received.';
  } catch (e) {
    console.error('Fetch Error:', e);
    return 'Error: Unable to get response from AI.';
  }
}


// --------- SEND MESSAGE ---------
const sendBtn=document.getElementById('send-btn');
const userInput=document.getElementById('user-input');
sendBtn.addEventListener('click',async ()=>{
  const msg=userInput.value.trim();
  if(!msg) return;
  addMessage(msg,'user');
  userInput.value='';
  const reply=await getAIResponse(msg);
  addMessage(reply,'bot');
});
userInput.addEventListener('keydown',e=>{ if(e.key==='Enter') sendBtn.click(); });
</script>
</body>
</html>

